<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Linu安装Docker</title>
      <link href="/object-object/"/>
      <url>/object-object/</url>
      
        <content type="html"><![CDATA[<pre><code>&lt;!-- more --&gt; </code></pre><p><strong>CentOS 7</strong></p><p>检查环境</p><ol><li><p>检查内核版本，返回的值大于3.10即可</p><pre><code>uname -r</code></pre><p>卸载</p><p>1.查询安装过的包</p><p>yum list installed | grep docker<br>docker-engine.x86_64                 17.03.0.ce-1.el7.centos         @dockerrepo</p><p>2.删除安装的软件包</p><p>yum -y remove docker-engine.x86_64</p></li></ol><pre><code>3.删除镜像/容器等rm -rf /var/lib/docker</code></pre><p>Centos7安装配置docker</p><ol start="2"><li><p>安装需要的软件包，yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的</p><pre><code>  yum install -y yum-utils device-mapper-persistent-data lvm2</code></pre></li><li><p>设置yum源</p><pre><code>  yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</code></pre></li><li><p>可以查看所有仓库中所有docker版本，并选择特定版本安装</p><pre><code>    yum list docker-ce --showduplicates | sort -r</code></pre></li><li><p>安装docker<br>​            选择最新安装即可</p><pre><code>    yum install docker-ce-19.03.9-3.el7</code></pre></li><li><p>验证安装</p><pre><code> docker -v</code></pre></li><li><p>启动并加入开机启动</p><pre><code>       systemctl start docker       systemctl enable docker</code></pre></li></ol><hr><p><strong>CentOS 8</strong></p><p><a href="https://docs.docker.com/engine/install/centos/" target="blank">官方参考地址</a></p><p>安装依赖</p><pre class="line-numbers language-javascript"><code class="language-javascript">yum install <span class="token operator">-</span>y yum<span class="token operator">-</span>utils device<span class="token operator">-</span>mapper<span class="token operator">-</span>persistent<span class="token operator">-</span>data lvm2yum<span class="token operator">-</span>config<span class="token operator">-</span>manager <span class="token operator">--</span>add<span class="token operator">-</span>repo  https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>download<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>com<span class="token operator">/</span>linux<span class="token operator">/</span>centos<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>repoyum install docker<span class="token operator">-</span>ce docker<span class="token operator">-</span>ce<span class="token operator">-</span>cli containerd<span class="token punctuation">.</span>io<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果报错：Problem: package docker-ce-3:19.03.4-3.el7.x86_64 requires containerd.io &gt;= 1.2.2-3 那就先装新版的 containerd.io</p><p>安装新版本containerd.io</p><pre class="line-numbers language-javascript"><code class="language-javascript">rpm <span class="token operator">-</span>i 包名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>再装剩下两个</p><pre><code>yum install docker-ce docker-ce-cli</code></pre><p>启动docker</p><pre><code>systemctl start docker</code></pre><p>查看版本</p><pre><code>docker --version</code></pre><p>开机自启</p><pre><code>systemctl enable docker</code></pre><hr><p><strong>Debian</strong><br>环境</p><ol><li>卸载旧版本<br>旧版本的 Docker 称为 docker 或者 docker-engine，使用以下命令卸载旧版本<pre><code>  apt-get remove docker docker-engine docker.io</code></pre></li><li>Debian 7 的内核默认为 3.2，为了满足 Docker CE 的需求，应该安装 backports 的内核<br>2.1    Debian 7 Wheezy 使用以下命令<pre><code>  sudo apt-get update sudo apt-get install apt-transport-https ca-certificates curl lsb-release python-software-properties</code></pre>2.2    Debian 8 Jessie 或者 Debian 9 Stretch 使用以下命令<pre><code>  apt-get update &amp; apt-get install apt-transport-https ca-certificates curl gnupg2 lsb-release software-properties-common</code></pre></li></ol><p>安装 </p><ol><li><p>国内源<br>1.1    为了确认所下载软件包的合法性，需要添加软件源的 GPG 密钥。</p><pre><code>  curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/debian/gpg | apt-key add -</code></pre><p>1.2    然后，我们需要向 source.list 中添加 Docker CE 软件源：</p><pre><code>  add-apt-repository &quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/debian $(lsb_release -cs) stable&quot;</code></pre><p>  以上命令会添加稳定版本的 Docker CE APT 镜像源，如果需要最新版本的 Docker CE 请将 stable 改为 edge 或者 test。从 Docker 17.06 开始，edge test 版本的 APT 镜像源也会包含稳定版本的 Docker CE。</p></li><li><p>官方源</p><pre><code>  curl -fsSL https://download.docker.com/linux/debian/gpg | apt-key add -   add-apt-repository \  &quot;deb [arch=amd64] https://download.docker.com/linux/debian  $(lsb_release -cs) \  stable&quot;</code></pre></li><li><p>Debian 7 需要进行额外的操作<br>3.1    编辑 /etc/apt/sources.list 将 deb-src 一行删除或者使用 # 注释</p><pre><code>  deb-src [arch=amd64] https://download.docker.com/linux/debian wheezy stable</code></pre></li><li><p>安装 Docker CE<br>4.1    更新 apt 软件包缓存，并安装 docker-ce</p><pre><code>  apt-get update   apt-get install docker-ce</code></pre><p>4.2    验证Docker</p><pre><code>  docker -v</code></pre></li><li><p>显示Debian发行版的名称</p><pre><code>  lsb_release -cs</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
